pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
	px = 4
	py = 24
	dx = 0
	dy = 0
	grav = 0.2
	world_h = 30
	world_w = 30
	spd = 1.25
end 

function _draw()
	cls()
	map(0,0,0,0,world_w,world_h)
	spr(index,px,py,1,1,direction)
	if (btn(5)) then
	 index = 160
	 if direction then	spr(177,px-7,py,1,1,direction)	
	 else spr(177,px+7,py,1,1,direction)
  end
	end
end

function _update()
	dx = 0
	
	if (btn(5)) then
 index = 160 
	else
	 index = 128
 end
	
	if gameover() then
	 reload()
	end
	
	if (btn(0)) then
		direction = true
		if checkcolleft() then
			dx = 0
		else
		 dx = -spd
		end
	end
	
	if (btn(1)) then
		direction = false
		if checkcolright() then
	 	dx = 0
		else
		 dx += spd
		end
	end
	
	if grounded() then
	dy = 0
	py = flr(flr(py)/8)*8
	else dy += grav
	end
	
	if jump() then
	 py -= 2.5
	 if (btn(5)) then index = 161
	 else index = 129
	 end
 end
 
	px += dx 
	py += dy
	camera(px-56, py-72)
	bordercoll()
	
end

-->8
function grounded()
	v = mget(flr(px+4)/8, flr(py)/8+1)
	return fget(v, 0)
end

function checkcolright()
	rgt = mget(flr(px)/8+1, flr(py+5)/8)
	return fget(rgt, 0)
end

function checkcolleft()
	lft = mget(flr(px-1)/8, flr(py+5)/8)
	return fget(lft, 0)
end

function jump()
	if (btn(4) or btn(2)) return true
end

function gameover()
	if (py >= 128) then
		load("tileset.p8")
	end
end

function ammo()
 g =	mget(px/8, py/8)
 return fget(g, 1)
end	 

function bordercoll()
 if (px > 256) px = 120
 if (px < 0) px = 0
 if (py > 128) py = 128
 if (py < 0) py = 0
end

__gfx__
0000000003bbbbbbbbbbbbbbbbbbbb300dddddddddddddddddddddd00ffffffffffffffffffffff00ffffffffffffffffffffff0000000000000000000000000
000000003b3bb33bb33bbb3bbb3bb3b3dd55555555555555555555ddff55555555555555555555ffff55555555555555555555ff000000000000000000000000
00700700333333333333333333333333d5666666666666666666665df5666666666666666666665ff5444444444444444444445f000000000000000000000000
000770004444444444444444444444445666676666666676666666655666676666f66f6666766665544444444444424444244445000000000000000000000000
00077000444444444444444444444444666666666676666666667666666766666666666666676666444244244424444444442444000000000000000000000000
00700700444444444444444444444444666666666666666666666666666666666666666666666666444444444444444444444444000000000000000000000000
00000000444444444444444444444444666666666666666666666666666666666666666666666666444444444444444444444444000000000000000000000000
00000000444444444444444444444444666666666666666666666666666666666666666666666666444444444444444444444444000000000000000000000000
000000000bbbbbbbbbbbbbbbbbbbbbb00dddddddddddddddddddddd00ffffffffffffffffffffff00ffffffffffffffffffffff0000000000000000000000000
00000000bb33333333333333333333bbdd55555555555555555555ddff55555555555555555555ffff55555555555555555555ff000000000000000000000000
00000000b3444444444444444444443bd5666667676666666666665df5666666666666666666665ff5444444444444444444445f000000000000000000000000
00000000344444444444444444444443566666666666dd666dd66665566666666676666666666665544244444442242444444445000000000000000000000000
00000000444444444444444444444444666676666667dd666dd67666666667666666676666667666444444244442244442444244000000000000000000000000
00000000044444444444444444444440066666666666666666666660066666666666666666666660044444444444444444444440000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000333333333333333333333300dddddddddddddddddddddd00ffffffffffffffffffffff00ffffffffffffffffffffff0000000000000000000000000
00000000332222222222222222222233dd55555555555555555555ddff55555555555555555555ffff55555555555555555555ff000000000000000000000000
00000000324444444444444444444423d5666666666666666666665df5666666666666666666665ff5444444444444444444445f000700000000000000000000
00000000244444444444444444444442566667666666766666666765566666666666676666666665544444444244444444444445007770000000000000000000
000000004444444444444444444444446666d666667666d667666666666766766667666666667666444244444444244444444444000700000000000000000000
00000000444444444444444444444444666666666666666666666666666666666666666666666666444444444444444444444444000000000000000000000000
00000000444444444444444444444444666666666666666666666666666666666666666666666666444444444444444444444444000000000000000000000000
00000000444444444444444444444444666666666666666666666666666666666666666666666666444444444444444444444444000000000000000000000000
00000000242424244444444444444444444443bbbb34444444444444444444444444444444444444000000000000000000000000000000000000000000000000
0000000042424242444444444444444444443b3bb3b3444444244444444424444444444444444444000007000000000000000070000000000000000000000000
00000000242424244444444444444444444433333333444444444444444444444444444444444444000077700000070000000777000000000000000000000000
00000000424242424444444444444444444444444444444444444444444444444444444444444444000007000000000000000070000000000000000000000000
00000000242424244444444444444444444444444444444444444444444444444444444444444444000000000000000007000000000070000000000000000000
00000000424242424444444444244444444444444444444444444444424444240444444444444440000000000000000077700000000000000000000000000000
00000000242424244444444444444444444444444444444444444244444444440044444444444400000000000700000007000000000000000000000000000000
00000000424242424444444444444444444444444444444444444444444444440000444444440000000000000000000000000000000000000000000000000000
044444400444444004444440022222200aaaaaa004444440044444400444444000000000044000000dddddd00000000000000000000000000009990000000000
4aaaaaa44aaaaaa44999999424444442a9aaaa9a4222222444222224442222440000000044444244ddddd2dd000000000000000000000000000aa00000000000
4aa77aa44aa99aa44996699424444442aaaaaaaa4222222442422224424224240000000042244444d22ddddd0000000000000000000000000094440000000000
4a7997a44a9999a44966669424444442aaaaaaaa4222222442242224422442240000000042244444d22ddddd0000000000000000000000000544445000000000
4a7997a44a9999a44966669424444442aaaaaaaa4222222442224224422442240000000044444424dddddd2d0000000000000000000000000566665000000000
4aa77aa44aa99aa44996699424444442aaaaaaaa4222222442222424424224240000000044442444dddd2ddd0000000000000000000000000544445000000000
4aaaaaa44aaaaaa44999999424444442a9aaaa9a4222222442222244442222440000000044644444dd6ddddd0000000000000000000000000054450000000000
044444400444444004444440022222200aaaaaa004444440044444400444444000000000044444400dddddd00000000000000000000000000000000000000000
0444444000000000000000000000000000000000440000000000000000000044400000040000000000000cc00000000000055000000000000000000000000000
4aaaaaa4000000000000000000000000000000004444444444444444444444444444444400000000cc00cccc0000000000d55d00000000000000000000000000
4aaaaaa4000660000000000000000000000000004444444444444444444444444000000400000000c1cccccc000000000dddddd0000000000000000000000000
4aa99aa4006dd6000003000000000000000aa0004400000000000000000000444444444400000000cccccc1c000000000dddddd0000000000000000000000000
4aa99aa400ddd600000330330000000000aaaa0044000000000000000000004440000004000000001111111100000000dddddddd000000000000000000000000
4a9999a40dd1dd663303333000aaaa000999999044444444440000004444444444444444000000001c11c11c00000000dddddddd000000000000000000000000
4aaaaaa4dd1ddddd0333333006666660066666604444444444440000444444444000000406060606cccccccc00000000dddddddd000000000000000000000000
044444400ddddddd0033330066666666666666664400000004040000000000444444444466666666c1c1cc1c00000000dddddddd000000000000000000000000
00000000000000000000000000000000000000000000000000000000099999900888888000000000004402000000000000000000000000000000000000000000
00003300000000000000000000000000000000000000000044444444999999998888888800000000222222200000000000000000000000000000000000000000
00033000000000000000000000000000000000000000000044444444999119998881188800000000222222220000000000000000000000000000000000000000
0883880000000000000b000000000000000880000000000000000000991111998811118800000000222222200000000000000000000000000000000000000000
8888888000000000000bb0bb00000000008888000000000000000000991111998811118800000000004402000000000000000000000000000000000000000000
8888878000000000bb0bbbb000888800022222200000000044444444999119998881188800600060004400000000000000000000000000000000000000000000
88887880000000000bbbbbb006666660066666600000000044444444991111998811118806660666004400000000000000000000000000000000000000000000
088888000000000000bbbb0066666666666666660000000000000000099999900888888066666666004400000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000033333300cccccc000000000002044000000000000000000000000000000000000000000
0000002200222000220000000000000000000000888888880000000033333333cccccccc00000000022222220000000000000000000000000000000000000000
0000024200242000242000000000000000000000888888880000000033311333ccc11ccc00000000222222220000000000000000000000000000000000000000
00000400000400000040000000000000000cc000006600000000000033111133cc1111cc00000000022222220000000000000000000000000000000000000000
0000400000040000000400000000000000cccc00000660008888888833111133cc1111cc00000000002044000000000000000000000000000000000000000000
00044400004440000044400000cccc0001111110000066008888888833311333ccc11ccc00000000000044000000000000000000000000000000000000000000
0066666006666600066666000666666006666660000660000666666033111133cc1111cc00000000000044000000000000000000000000000000000000000000
06666666666666606666666066666666666666660066660000666600033333300cccccc000000000000044000000000000000000000000000000000000000000
0cffff000cffff000000000000000000000000000000000000000000008080000000000000000000000000000000000000000000000000000000000000000000
0cff1f000cff1f000000000000000000000000000000000000808000088888000000000000000000000000000000000000000000000000000000000000000000
0cffff000cffff000000000000000000000000000000000008888800887878800000000000000000000000000000000000000000000000000000000000000000
0ccccc000ccccc00000cc00000000000000330000000000088787880088288880000000000000000000000000000000000000000000000000000000000000000
0ccccff00ccccff000cccc0000000000003333000000000008828888008228800000000000000000000000000000000000000000000000000000000000000000
0ccccc000ffcff000c1cccc00000000003b333300000000000822880000828000000000000000000000000000000000000000000000000000000000000000000
0ff0ff00044044000ccccccc0c1cccc00333333303b3333000082800000880000000000000000000000000000000000000000000000000000000000000000000
04404400000000000cccccc0cccccccc033333303333333300088000008880000000000000000000000000000000000000000000000000000000000000000000
0cffff000cffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cff1f000cff1f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cffff000cffff000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ccccc000ccccc007118800001188800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ccccff00ccccff01188880071828280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ffccc000cccff001882828018282888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0440ff000ff044001828288818888811000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00004400044000000888888000888110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cffff000cffff000cffff000cffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cff1f000cff1f000cff1f000cff1f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cffff000cffff000cffff000cffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cccccf00cccccf00cccccf00cccccf0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ccccff00ccccff00ccccff00ccccff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cccccf00ffcfff00ffcccf00cccfff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ff0ff00044044000440ff000ff04400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04404400000000000000440004400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0009000ff88788000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0090000ff88878000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9966666ff88888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0090000ff88888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00090000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001010101020202020101010100000000010101010101010101010101000000000101010101010101010101010000000001010101010101010100000000000000000001000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000003d00002d000000003d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00002d00000000959595950000000000003d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000009595526a950000003a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a00000051003b0001020300003d000000003b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020202030000333732000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3736323233320060363332003c000000002d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3632323634020202023537000000000102020300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3237323232333236323232000000003336323200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
323232363232323237323600003b003232323700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3836323332323732323339000000003836373900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0001000000000000000e0501b0501c050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
